{% extends "base.html" %}
{% load static %}
{% block title %}{{ object.nombre }}{% endblock %}

{% block content %}
<a href="{% url 'sahumerios_lista' %}" class="btn btn-sec">Volver</a>

<div class="wrap" style="max-width:1200px;margin:18px auto 0;display:grid;grid-template-columns:1fr 1fr;gap:28px">
  <div>
    {% if object.imagen_file %}
      <img class="detail-img" src="{{ object.imagen_file.url }}" alt="{{ object.nombre }}">
    {% elif object.imagen_url %}
      <img class="detail-img" src="{{ object.imagen_url }}" alt="{{ object.nombre }}">
    {% else %}
      <img class="detail-img" src="{% static 'img/placeholder.png' %}" alt="Sin imagen">
    {% endif %}
  </div>

  <div>
    <h2 style="margin:0 0 8px">{{ object.nombre }}</h2>
    {% if object.marca %}<p class="meta"><strong>Marca:</strong> {{ object.marca }}</p>{% endif %}
    <p class="price">${{ object.precio }}</p>
    {% if object.descripcion %}<p class="meta">{{ object.descripcion }}</p>{% endif %}
    <p class="meta">Stock: {{ object.stock }} • {% if object.activo %}Activo{% else %}Inactivo{% endif %}</p>

    {% comment %} SOLO fsosa ve acciones de edición {% endcomment %}
    {% if user.is_authenticated and user.username|lower == 'fsosa' %}
      <div style="display:flex;gap:8px;margin-top:10px">
        <a class="btn-sec" href="{% url 'sahumerio_editar' object.pk %}?volver={{ request.get_full_path|urlencode }}">Editar</a>
        <form method="post" action="{% url 'sahumerio_borrar' object.pk %}" onsubmit="return confirm('¿Borrar este sahumerio?')">
          {% csrf_token %}
          <button class="btn" style="background:#dc2626">Borrar</button>
        </form>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
